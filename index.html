<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI NEWS üóûÔ∏è</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #121212;
            color: #e0e0e0;
        }
        .news-container {
            max-width: 800px;
            margin: 0 auto;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .header h1 {
            font-size: 2.5rem;
            color: #ffffff;
            margin: 0;
        }
        .refresh-button {
            background: none;
            border: none;
            cursor: pointer;
            color: #ffffff;
            font-size: 1.5rem;
            transition: transform 0.3s;
        }
        .refresh-button:hover {
            transform: rotate(90deg);
        }
        .news-item {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: #1e1e2f;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .news-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.7);
        }
        .news-thumbnail {
            width: 100%;
            max-height: 200px;
            object-fit: cover;
            border-radius: 8px;
        }
        .news-content {
            padding: 10px 0;
        }
        .news-content h2 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: bold;
            background: linear-gradient(to right, #8e44ad, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .news-content p {
            margin: 8px 0;
            font-size: 1rem;
            color: #b0b0b0;
        }
        .read-more {
            display: inline-block;
            margin-top: 10px;
            padding: 10px 15px;
            background: #3498db;
            color: #fff;
            text-decoration: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            transition: background 0.3s;
        }
        .read-more:hover {
            background: #2980b9;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            font-size: 0.9rem;
            color: #555;
        }
        .load-more-button {
            display: inline-block;
            margin-top: 20px;
            padding: 10px 15px;
            background: #8e44ad;
            color: #fff;
            text-decoration: none;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        .load-more-button:hover {
            background: #6f3483;
        }
        .loading {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="news-container">
        <div class="header">
            <h1>AI NEWS üóûÔ∏è</h1>
            <button class="refresh-button" onclick="refreshNews()">üîÑ</button>
        </div>
        <div id="rss-feed">
            <p class="loading">Carregando not√≠cias...</p>
        </div>
    </div>
    <footer>
        <button class="load-more-button" onclick="loadMoreNews()">Carregar Mais Not√≠cias</button>
        <p>¬© 2025 Not√≠cias sobre IA | Desenvolvido com üíú e üíª pelo iaLAB | FSB Holding</p>
    </footer>

    <script>
        let feedUrls = [
            "https://rss.app/feeds/6Hz47FdaZpHrlKMP.xml",
            "https://g1.globo.com/rss/g1/tecnologia/",
            "https://www.technologyreview.com/feed/",
            "https://openai.com/blog/rss",
            "https://ai.googleblog.com/feeds/posts/default?alt=rss",
            "https://hbr.org/topic/artificial-intelligence/rss",
            "https://techcrunch.com/tag/artificial-intelligence/feed/",
            "https://www.wired.com/category/science/artificial-intelligence/feed/",
            "https://neofeed.com.br/feed"
        ];
        let itemsPerFeed = 5;

        async function fetchRSS(feedUrl) {
            const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`);
            const data = await response.json();
            return data.items || [];
        }

        function cleanHTMLAndTrim(input, maxLength) {
            if (!input) return "";
            const doc = new DOMParser().parseFromString(input, 'text/html');
            const text = doc.body.textContent || "";
            if (text.length <= maxLength) {
                return text;
            }
            const trimmedText = text.substring(0, maxLength).trim();
            return trimmedText.substring(0, trimmedText.lastIndexOf(" ")) + "...";
        }

        function generateAutoSummary(title) {
            return `Leia mais sobre: ${title}`;
        }

        async function displayFeeds() {
            const feedContainer = document.getElementById("rss-feed");
            feedContainer.innerHTML = "";

            let allItems = [];

            for (const url of feedUrls) {
                try {
                    const items = await fetchRSS(url);
                    allItems = allItems.concat(items);
                } catch (error) {
                    console.error("Erro ao carregar feed RSS:", error);
                }
            }

            // Ordenar por data de publica√ß√£o
            allItems = allItems.filter(item => item.pubDate).sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

            const itemsToDisplay = allItems.slice(0, itemsPerFeed);

            itemsToDisplay.forEach(item => {
                if (!item.link || !item.link.startsWith("http")) {
                    return;
                }

                const newsItem = document.createElement("div");
                newsItem.className = "news-item";

                const content = document.createElement("div");
                content.className = "news-content";

                const title = document.createElement("h2");
                title.textContent = item.title;
                content.appendChild(title);

                const description = document.createElement("p");
                const cleanDescription = cleanHTMLAndTrim(item.description, 120);
                description.textContent = cleanDescription || generateAutoSummary(item.title);
                content.appendChild(description);

                const readMore = document.createElement("a");
                readMore.className = "read-more";
                readMore.href = item.link;
                readMore.target = "_blank";
                readMore.textContent = "Ler mais";
                content.appendChild(readMore);

                newsItem.appendChild(content);

                const isTechReview = item.link.includes("technologyreview");
                const imageUrl = isTechReview
                    ? (item.thumbnail || item.enclosure?.link || item.media?.content?.url || "https://www.technologyreview.com/wp-content/uploads/2021/02/default-hero.jpg")
                    : item.thumbnail || item.enclosure?.link || "";

                if (imageUrl && imageUrl.startsWith("http")) {
                    const img = document.createElement("img");
                    img.className = "news-thumbnail";
                    img.src = imageUrl;
                    img.alt = "Thumbnail";
                    newsItem.insertBefore(img, content);
                }

                feedContainer.appendChild(newsItem);
            });
        }

        function refreshNews() {
            itemsPerFeed = 5;
            displayFeeds();
        }

        function loadMoreNews() {
            itemsPerFeed += 5;
            displayFeeds();
            setTimeout(() => {
                document.querySelector('footer').scrollIntoView({ behavior: 'smooth' });
            }, 100);
        }

        displayFeeds();
    </script>
</body>
</html>
