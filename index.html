.load-more-button {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 12px;
            background: #8e44ad;
            color: #fff;
            text-decoration: none;
            border: none;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        .load-more-button:hover {
            background: #6f3483;
        }
        .loading {
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="news-container">
        <div id="rss-feed">
            <p class="loading">Carregando notÃ­cias...</p>
        </div>
    </div>
    <footer>
        <button class="load-more-button" onclick="loadMoreNews()">Carregar Mais NotÃ­cias</button>
        <p>Â© 2025 NotÃ­cias sobre IA | Desenvolvido com ðŸ’œ e ðŸ’» pelo iaLAB | FSB Holding</p>
    </footer>

    <script>
        let feedUrls = [
            "https://rss.app/feeds/6Hz47FdaZpHrlKMP.xml",
            "https://g1.globo.com/rss/g1/tecnologia/",
            "https://www.technologyreview.com/feed/",
            "https://openai.com/blog/rss",
            "https://ai.googleblog.com/feeds/posts/default?alt=rss",
            "https://hbr.org/topic/artificial-intelligence/rss",
            "https://techcrunch.com/tag/artificial-intelligence/feed/",
            "https://www.wired.com/category/science/artificial-intelligence/feed/",
            "https://neofeed.com.br/feed"
        ];
        let itemsPerFeed = 5;

        async function fetchRSS(feedUrl) {
            const response = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feedUrl)}`);
            const data = await response.json();
            return data.items || [];
        }

        function cleanHTMLAndTrim(input, maxLength) {
            if (!input) return "";
            const doc = new DOMParser().parseFromString(input, 'text/html');
            const text = doc.body.textContent || "";
            if (text.length <= maxLength) {
                return text;
            }
            const trimmedText = text.substring(0, maxLength).trim();
            return trimmedText.substring(0, trimmedText.lastIndexOf(" ")) + "...";
        }

        function generateAutoSummary(title) {
            return `Leia mais sobre: ${title}`;
        }

        async function displayFeeds() {
            const feedContainer = document.getElementById("rss-feed");
            feedContainer.innerHTML = "";

            let allItems = [];

            for (const url of feedUrls) {
                try {
                    const items = await fetchRSS(url);
                    allItems = allItems.concat(items);
                } catch (error) {
                    console.error("Erro ao carregar feed RSS:", error);
                }
            }

            allItems = allItems.filter(item => item.pubDate).sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));

            const itemsToDisplay = allItems.slice(0, itemsPerFeed);

            itemsToDisplay.forEach(item => {
                if (!item.link || !item.link.startsWith("http")) {
                    return;
                }

                const newsItem = document.createElement("div");
                newsItem.className = "news-item";

                const content = document.createElement("div");
                content.className = "news-content";

                const title = document.createElement("h2");
                title.textContent = item.title;
                content.appendChild(title);

                const description = document.createElement("p");
                const cleanDescription = cleanHTMLAndTrim(item.description, 120);
                description.textContent = cleanDescription || generateAutoSummary(item.title);
                content.appendChild(description);

                const source = document.createElement("p");
                source.textContent = `Fonte: ${new URL(item.link).hostname}`;
                source.style.fontSize = "0.9rem";
                source.style.color = "#999";
                content.appendChild(source);

                const date = new Date(item.pubDate);
                const formattedDate = date.toLocaleDateString('pt-BR', {
                    day: '2-digit',
                    month: 'long',
                    year: 'numeric'
                });
                const dateElement = document.createElement("p");
                dateElement.textContent = formattedDate;
                dateElement.style.fontSize = "0.9rem";
                dateElement.style.color = "#999";
                content.appendChild(dateElement);

                const readMore = document.createElement("a");
                readMore.className = "read-more";
                readMore.href = item.link;
                readMore.target = "_blank";
                readMore.rel = "noopener noreferrer";
                readMore.textContent = "Ler mais";
                content.appendChild(readMore);

                newsItem.appendChild(content);

                const imageUrl = item.thumbnail && item.thumbnail.startsWith("http")
                    ? item.thumbnail
                    : (item.enclosure && item.enclosure.link && item.enclosure.link.startsWith("http"))
                    ? item.enclosure.link
                    : (item.media && item.media.content && item.media.content.startsWith("http"))
                    ? item.media.content
                    : null;

                if (imageUrl) {
                    const img = document.createElement("img");
                    img.className = "news-thumbnail";
                    img.src = imageUrl;
                    img.alt = "Thumbnail";
                    newsItem.insertBefore(img, content);
                }

                feedContainer.appendChild(newsItem);
            });
        }

        function loadMoreNews() {
            itemsPerFeed += 5;
            displayFeeds().then(() => {
                const lastNewsItem = document.querySelector(".news-item:last-child");
                if (lastNewsItem) {
                    lastNewsItem.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        }

        displayFeeds();
    </script>
</body>
</html>
